# JPA 기본편

### 목표

- 객체와 테이블 설계 매핑
    - 객체와 테이블을 제대로 설계, 매핑
    - 기본 키 외래 키 매핑
    - 1:N, N:1, 1:1, N:M 매핑
    - 실무 노하우+ 성능까지 고려 = > 복잡한 시스템도 JPA로 설계 가능

- JPA 내부 동작 방식 이해
    - JPA의 내부 동작 방식을 이해하지 못하고 사용
    - JPA 내부 동작 방식을 그림과 코드로 자세히 설명
    - JPA가 어떤 SQL을 만들어내는지, 언제 SQL을 실행하는 지 이해

    ### SQL 중심적인 개발의 문제점

    - 무한 CRUD 반복 ⇒ SQL 의존적인 개발
    - 객체형 / 관계형의 패러다임의 불일치
        - 객체를 관계형 데이터 베이스에 저장
        - 상속/연관관계/데이터 타입/데이터 식별방법의 차이


# JPA와 모던 자바 데이터 저장 기술

지금 시대는 객체를  RDB에 저장해서 사용 (RDB = 관계형 데이터베이스)

⇒ 모든 것이 SQL 중심적 개발의 **문제점**

### RDB를 사용함으로서 문제점들

1. **무한 반복, 지루한 코드** - CRUD, 필드 추가 시 CRUD쿼리 모두 수정

⇒ SQL 의존적 개발을 피하기 어렵다

1. **패러다임의 불일치** - 객체 vs RDB  근본 규정이 다름! 하지만 현실적 대안은 RDB

⇒ 즉, 개발자는 SQL 매퍼가 된다. 

**객체와 RDB의 차이** 

 -상속, 연관관계, 데이터 타입, 데이터 식별 방법 등등

- 상속 : 자바 컬렉션에서 조회시 간단하다. 하지만, RDB에서 조회시 매핑이 필요하다.
- 연관관계 : 객체는 참조를 사용, 테이블은 외래 키를 사용 하지만 객체는 단방향 이지만, 테이블을 양방향인 차이가 있다.
- 객체 그래프 탐색 : 객체는 자유롭게 객체 그래프를 탐색할 수 있다. 하지만, RDB로 인해 처음 실행하는 SQL에 따라 탐색 범위를 결정. 이로 인한 앤티티 신뢰 문제 발생 - 코드를 다 확인을 해봐야지 확인 가능.(반환 범위를 알 수 없기 때문에)

1. **계층형 아키텍처의 진정한 의미의 계층 분할이 어렵다.**

즉 객체답게 모델링을 할수록 매핑 작업만 늘어난다.

그래서 **JPA**!!